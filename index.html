<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wedding Designer</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            text-align: center;
            padding: 20px;
            touch-action: manipulation;
        }
        .container {
            max-width: 500px;
            margin: auto;
            text-align: left;
        }
        h1, h2 {
            text-align: center;
            font-weight: 700;
        }
        .logo {
            display: block;
            margin: auto;
            width: 80%; /* Changed from 40% to 100% to match form width */
            max-width: 500px; /* Match the container max-width */
        }
        .option-group {
            margin-bottom: 25px;  /* Increased from 15px */
        }
        .option-group label {
            display: block;
            margin-bottom: 5px;
        }
        .total-box {
            font-weight: bold;
            margin-top: 10px;
        }
        .hidden {
            display: none;
        }
        button {
            background-color: #00E676; /* Brighter neon green */
            color: white;
            border: none;
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 230, 118, 0.3); /* Subtle green glow */
        }
        button:hover {
            background-color: #00FF8D; /* Even brighter on hover */
            box-shadow: 0 4px 12px rgba(0, 255, 141, 0.4); /* Enhanced glow effect */
        }
        .back-button {
            background-color: #536DFE; /* Neon blue instead of gray */
        }
        .back-button:hover {
            background-color: #768FFF; /* Lighter blue on hover */
        }
        input, select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-top: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        /* New styles for checkbox and radio alignment */
        .option-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;  /* Increased from 8px */
            padding: 6px 0;       /* Added padding for larger touch area */
        }
        .option-item input[type="radio"],
        .option-item input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            margin-top: 0;
        }
        
        /* iPad optimization */
        @media only screen and (min-width: 768px) and (max-width: 1024px) {
            body {
                padding: 30px;
                font-size: 18px;
            }
            
            .container {
                max-width: 700px;
                padding: 30px;          /* Increased from 20px */
            }
            
            button {
                padding: 18px;
                font-size: 20px;
            }
            
            input, select {
                padding: 15px;
                font-size: 18px;
                margin-top: 8px;         /* Increased from 5px */
                margin-bottom: 8px;
            }
            
            .option-item {
                margin-bottom: 24px;     /* Increased from 18px */
                padding: 10px 0;         /* Increased vertical padding */
            }
            
            .option-item input[type="radio"],
            .option-item input[type="checkbox"] {
                margin-right: 15px;
                transform: scale(1.5); /* Make checkboxes and radio buttons larger */
            }
            
            .option-item label {
                font-size: 18px;
            }
            
            .total-box {
                font-size: 20px;
                margin-top: 15px;
                margin-bottom: 15px;
            }

            /* Add these new styles for better touch interaction */
            button {
                padding: 20px;
                font-size: 22px;
                margin-top: 15px;
                -webkit-tap-highlight-color: rgba(0,0,0,0);
                -webkit-appearance: none;
            }
            
            button:active {
                transform: scale(0.98);
                transition: transform 0.1s;
            }
            
            .option-item {
                margin-bottom: 24px;     /* Increased from 18px */
                padding: 10px 0;         /* Increased vertical padding */
            }
            
            .option-item input[type="radio"],
            .option-item input[type="checkbox"] {
                margin-right: 18px;
                transform: scale(1.8); /* Make checkboxes and radio buttons even larger */
                -webkit-tap-highlight-color: rgba(0,0,0,0);
            }
            
            /* Support both landscape and portrait orientations */
            @media (orientation: landscape) {
                .container {
                    max-width: 90%;
                }
                
                /* Two-column layout in landscape */
                body {
                    padding: 20px 40px;
                }
            }
            
            /* Increase spacing for form fields */
            input, select {
                margin-top: 8px;         /* Increased from 5px */
                margin-bottom: 8px;
            }
            
            /* Make sure labels have enough separation */
            .option-group > label {
                margin-bottom: 12px;     /* Increased from 5px */
                font-weight: bold;
            }

            .logo {
                max-width: 700px; /* Match the container max-width for iPad */
            }
        }

        /* Add these styles to create clearer section divisions */
        .section-title {
            background-color: #f8f9fa;
            padding: 10px;
            margin-top: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            font-weight: bold;
            border-left: 4px solid #00E676; /* Matching neon green */
            color: #263238;
        }
        
        /* Enhanced price display */
        .price-section {
            margin-top: 25px;
            margin-bottom: 25px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .total-box {
            font-weight: bold;
            margin-top: 10px;
            margin-bottom: 10px;  /* Increased spacing between price items */
            padding: 5px 0;
        }
        
        #discountedPriceContainer {
            background-color: rgba(0, 230, 118, 0.15); /* Translucent neon green */
            padding: 12px;
            border-radius: 6px;
            border: 1px dashed #00E676;
            margin-top: 15px;
            font-size: 1.1em;
        }
        
        #discountedPrice {
            color: #00C853; /* Vivid green for the discounted price */
            font-size: 1.2em;
            font-weight: bold;
        }
        
        /* iPad-specific enhancements */
        @media only screen and (min-width: 768px) and (max-width: 1024px) {
            .section-title {
                padding: 15px;
                font-size: 20px;
                margin-top: 25px;
                margin-bottom: 25px;
            }
            
            .price-section {
                margin-top: 35px;
                margin-bottom: 35px;
                padding: 20px;
            }
            
            .total-box {
                margin-bottom: 15px;  /* Even more space on iPad */
                padding: 8px 0;
            }
            
            #discountedPriceContainer {
                padding: 15px;
                margin-top: 20px;
            }
        }

        /* Add a subtle highlight to selected radio buttons and checkboxes */
        input[type="radio"]:checked + label,
        input[type="checkbox"]:checked + label {
            color: #00C853; /* Matching neon green */
            font-weight: bold;
        }
        
        /* Enhanced focus states for form elements */
        input:focus, select:focus {
            border-color: #00E676;
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 230, 118, 0.25);
        }
    </style>
</head>
<body>
    <div class="container" id="page1">
        <img src="Logo.svg" class="logo" alt="Neonix Logo">
        <h1>Wedding Designer</h1>
        
        <div class="section-title">Select Your Band</div>
        <div class="option-group">
            <div class="option-item">
                <input type="radio" id="band1" name="band" value="2800" onchange="calculateTotal()">
                <label for="band1">Four Piece Band</label>
            </div>
            <div class="option-item">
                <input type="radio" id="band2" name="band" value="2500" onchange="calculateTotal()">
                <label for="band2">Three Piece Band</label>
            </div>
            <div class="option-item">
                <input type="radio" id="band3" name="band" value="700" onchange="calculateTotal()">
                <label for="band3">Acoustic Duo</label>
            </div>
        </div>

        <div class="section-title">Performance Options</div>
        <div class="option-group">
            <div class="option-item">
                <input type="radio" id="set1" name="sets" value="500" onchange="calculateTotal()">
                <label for="set1">2 x 45min sets</label>
            </div>
            <div class="option-item">
                <input type="radio" id="set2" name="sets" value="700" onchange="calculateTotal()">
                <label for="set2">3 x 45min sets</label>
            </div>
            <div class="option-item">
                <input type="radio" id="set3" name="sets" value="800" onchange="calculateTotal()">
                <label for="set3">2 x 1hr sets</label>
            </div>
        </div>

        <div class="section-title">Additional Services</div>
        <div class="option-group">
            <div class="option-item">
                <input type="checkbox" id="dj" value="300" onchange="calculateTotal()">
                <label for="dj">After Show DJ</label>
            </div>
            <div class="option-item">
                <input type="checkbox" id="photoBooth" value="300" onchange="calculateTotal()">
                <label for="photoBooth">Photo Booth</label>
            </div>
            <div class="option-item">
                <input type="checkbox" id="acousticSet" value="400" onchange="calculateTotal()">
                <label for="acousticSet">Acoustic Cocktail Set</label>
            </div>
        </div>

        <div class="price-section">
            <div class="total-box">Total Price: £<span id="totalPrice">0.00</span></div>
            <div class="total-box">10% Deposit: £<span id="depositAmount">0.00</span></div>

            <div class="option-item">
                <input type="checkbox" id="discountCheckbox" onclick="toggleDiscount()">
                <label for="discountCheckbox">Apply 15% discount</label>
            </div>

            <div class="total-box hidden" id="discountedPriceContainer">
                Discounted Price: £<span id="discountedPrice">0.00</span>
            </div>
        </div>

        <button onclick="goToPage2()">Proceed to Booking</button>
    </div>

    <div class="container hidden" id="page2">
        <img src="Logo.svg" class="logo" alt="Neonix Logo">
        <h1>Wedding Designer</h1>
        
        <div class="option-group">
            <label><strong>Your Name:</strong></label>
            <input type="text" id="clientName" placeholder="Enter your name">
        </div>

        <div class="option-group">
            <label><strong>Role in Wedding:</strong></label>
            <input type="text" id="role" placeholder="E.g. Bride, Groom, Planner">
        </div>

        <div class="option-group">
            <label><strong>Email Address:</strong></label>
            <input type="email" id="email" placeholder="Enter your email address">
        </div>
        
        <div class="option-group">
            <label><strong>Phone Number:</strong></label>
            <input type="tel" id="phone" placeholder="Enter your phone number">
        </div>

        <div class="option-group">
            <label><strong>Address:</strong></label>
            <input type="text" id="addressLine1" placeholder="Address line 1">
            <input type="text" id="addressLine2" placeholder="Address line 2 (optional)" style="margin-top: 5px;">
            <div style="display: flex; gap: 10px; margin-top: 5px;">
                <input type="text" id="city" placeholder="City" style="flex: 1;">
                <input type="text" id="postcode" placeholder="Postcode" style="flex: 1;">
            </div>
        </div>

        <div class="option-group">
            <label><strong>Requested Date:</strong></label>
            <input type="date" id="date">
        </div>

        <div class="option-group">
            <label><strong>Location:</strong></label>
            <input type="text" id="location" placeholder="Wedding venue">
        </div>

        <button class="back-button" onclick="goToPage1()">Back</button>
        <button onclick="saveBooking()">Submit Booking</button>
    </div>

    <script>
        function goToPage2() {
            document.getElementById("page1").classList.add("hidden");
            document.getElementById("page2").classList.remove("hidden");
        }

        function goToPage1() {
            document.getElementById("page2").classList.add("hidden");
            document.getElementById("page1").classList.remove("hidden");
        }

        function toggleDiscount() {
            document.getElementById("discountedPriceContainer").classList.toggle("hidden", !document.getElementById("discountCheckbox").checked);
            calculateTotal();
        }

        function calculateTotal() {
            let total = 0;
            document.querySelectorAll('input[name="band"]:checked, input[name="sets"]:checked, input[type="checkbox"]:checked:not(#discountCheckbox)').forEach(input => {
                total += parseFloat(input.value) || 0;
            });
            document.getElementById("totalPrice").innerText = total.toFixed(2);
            document.getElementById("depositAmount").innerText = (total * 0.10).toFixed(2);
            if (document.getElementById("discountCheckbox").checked) {
                document.getElementById("discountedPrice").innerText = (total * 0.85).toFixed(2);
            }
        }

        function saveBooking() {
            // Get selected band
            let selectedBand = "";
            let selectedBandPrice = "";
            if (document.getElementById("band1").checked) {
                selectedBand = "Four Piece Band";
                selectedBandPrice = document.getElementById("band1").value;
            } else if (document.getElementById("band2").checked) {
                selectedBand = "Three Piece Band";
                selectedBandPrice = document.getElementById("band2").value;
            } else if (document.getElementById("band3").checked) {
                selectedBand = "Acoustic Duo";
                selectedBandPrice = document.getElementById("band3").value;
            }
            
            // Get selected set option
            let selectedSet = "";
            let selectedSetPrice = "";
            if (document.getElementById("set1").checked) {
                selectedSet = "2 x 45min sets";
                selectedSetPrice = document.getElementById("set1").value;
            } else if (document.getElementById("set2").checked) {
                selectedSet = "3 x 45min sets";
                selectedSetPrice = document.getElementById("set2").value;
            } else if (document.getElementById("set3").checked) {
                selectedSet = "2 x 1hr sets";
                selectedSetPrice = document.getElementById("set3").value;
            }
            
            // Get additional features
            let additionalFeatures = [];
            if (document.getElementById("dj").checked) {
                additionalFeatures.push(`After Show DJ (£${document.getElementById("dj").value})`);
            }
            if (document.getElementById("photoBooth").checked) {
                additionalFeatures.push(`Photo Booth (£${document.getElementById("photoBooth").value})`);
            }
            if (document.getElementById("acousticSet").checked) {
                additionalFeatures.push(`Acoustic Cocktail Set (£${document.getElementById("acousticSet").value})`);
            }
            
            // Format all the booking information
            const details = `BOOKING DETAILS

Name: ${document.getElementById("clientName").value}
Role: ${document.getElementById("role").value}
Email: ${document.getElementById("email").value}
Phone: ${document.getElementById("phone").value}
Address: ${document.getElementById("addressLine1").value}
${document.getElementById("addressLine2").value}
${document.getElementById("city").value} ${document.getElementById("postcode").value}
Date: ${document.getElementById("date").value}
Location: ${document.getElementById("location").value}

SELECTED PACKAGE
Musicians: ${selectedBand} (£${selectedBandPrice})
Set Option: ${selectedSet} (£${selectedSetPrice})
${additionalFeatures.length > 0 ? 'Additional Features:\n' + additionalFeatures.join('\n') : 'No additional features selected'}

PRICING
Total Price: £${document.getElementById("totalPrice").innerText}
10% Deposit: £${document.getElementById("depositAmount").innerText}
${document.getElementById("discountCheckbox").checked ? 'Discounted Price (15% off): £' + document.getElementById("discountedPrice").innerText : ''}`;

            // Check if running on mobile/tablet
            const isMobileDevice = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            
            // For mobile devices (including Documents by Readdle), go straight to modal
            if (isMobileDevice) {
                showBookingSummary(details);
            } else {
                // For desktop browsers, try file download first
                try {
                    const blob = new Blob([details], { type: "text/plain" });
                    const link = document.createElement("a");
                    link.href = URL.createObjectURL(blob);
                    link.download = "Booking.txt";
                    link.click();
                } catch (e) {
                    console.error("File download failed, showing alternative:", e);
                    showBookingSummary(details);
                }
            }
            
            // Also save to localStorage as backup
            try {
                localStorage.setItem('lastBooking', details);
            } catch (e) {
                console.error("LocalStorage save failed:", e);
            }
        }

        // Add this new function for iPad compatibility
        function showBookingSummary(details) {
            // Create a modal overlay
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(0,0,0,0.7)';
            overlay.style.zIndex = '999';
            overlay.style.display = 'flex';
            overlay.style.justifyContent = 'center';
            overlay.style.alignItems = 'center';
            
            // Create a modal
            const modal = document.createElement('div');
            modal.style.backgroundColor = 'white';
            modal.style.padding = '20px';
            modal.style.borderRadius = '8px';
            modal.style.maxWidth = '90%';
            modal.style.maxHeight = '90%';
            modal.style.overflow = 'auto';
            modal.style.position = 'relative';
            
            // Close button
            const closeButton = document.createElement('button');
            closeButton.textContent = '×';
            closeButton.style.position = 'absolute';
            closeButton.style.right = '10px';
            closeButton.style.top = '10px';
            closeButton.style.background = 'none';
            closeButton.style.border = 'none';
            closeButton.style.fontSize = '24px';
            closeButton.style.cursor = 'pointer';
            closeButton.onclick = function() {
                document.body.removeChild(overlay);
            };
            
            // Title
            const title = document.createElement('h2');
            title.textContent = 'Booking Summary';
            title.style.marginTop = '0';
            
            // Content
            const content = document.createElement('pre');
            content.textContent = details;
            content.style.whiteSpace = 'pre-wrap';
            content.style.textAlign = 'left';
            content.style.padding = '10px';
            content.style.border = '1px solid #eee';
            content.style.borderRadius = '4px';
            
            // Copy to clipboard button
            const copyButton = document.createElement('button');
            copyButton.textContent = 'Copy to Clipboard';
            copyButton.style.backgroundColor = '#00E676';
            copyButton.style.color = 'white';
            copyButton.style.border = 'none';
            copyButton.style.padding = '10px 15px';
            copyButton.style.borderRadius = '5px';
            copyButton.style.marginTop = '15px';
            copyButton.style.cursor = 'pointer';
            copyButton.onclick = function() {
                navigator.clipboard.writeText(details)
                    .then(() => {
                        copyButton.textContent = 'Copied!';
                        setTimeout(() => {
                            copyButton.textContent = 'Copy to Clipboard';
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('Failed to copy: ', err);
                        alert('Failed to copy. Please select and copy manually.');
                    });
            };
            
            // Email button
            const emailButton = document.createElement('button');
            emailButton.textContent = 'Send via Email';
            emailButton.style.backgroundColor = '#536DFE';
            emailButton.style.color = 'white';
            emailButton.style.border = 'none';
            emailButton.style.padding = '10px 15px';
            emailButton.style.borderRadius = '5px';
            emailButton.style.marginTop = '15px';
            emailButton.style.marginLeft = '10px';
            emailButton.style.cursor = 'pointer';
            emailButton.onclick = function() {
                const subject = 'Wedding Booking - ' + document.getElementById("clientName").value;
                window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(details)}`;
            };
            
            // Assemble modal
            modal.appendChild(closeButton);
            modal.appendChild(title);
            modal.appendChild(content);
            modal.appendChild(copyButton);
            modal.appendChild(emailButton);
            overlay.appendChild(modal);
            
            // Show modal
            document.body.appendChild(overlay);
        }

        // Add function to retrieve last booking if needed
        function retrieveLastBooking() {
            try {
                return localStorage.getItem('lastBooking');
            } catch (e) {
                return null;
            }
        }
    </script>
</body>
</html>
